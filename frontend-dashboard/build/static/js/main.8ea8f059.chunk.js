(this["webpackJsonpiot-dashboard"]=this["webpackJsonpiot-dashboard"]||[]).push([[0],{108:function(e,t,a){e.exports=a(224)},113:function(e,t,a){},114:function(e,t,a){},119:function(e,t,a){},122:function(e,t,a){},123:function(e,t,a){},124:function(e,t,a){},125:function(e,t,a){},126:function(e,t,a){},218:function(e,t,a){},219:function(e,t,a){},220:function(e,t,a){},221:function(e,t,a){},222:function(e,t,a){},224:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),s=a(103),l=a.n(s),r=(a(113),a(14)),i=(a(114),a(47)),o=a(15),m=a(29),d=a(16);a(119);function u(e){var t=Object(n.useState)(!1),a=Object(r.a)(t,2),s=a[0],l=a[1],u=Object(n.useState)(-1),E=Object(r.a)(u,2),v=E[0],f=E[1],b=e.displace?"216px":"48px",p=Object(i.f)(),h=c.a.createElement("div",{onClick:function(){return l(!1)},className:"darken-page",style:{width:!0===s?"100vw":"0px"}});return Object(n.useEffect)((function(){for(var t="/"+p.pathname.split("/")[1],a=0;a<e.links.length;a++)if(e.links[a].route===t){f(a);break}}),[p]),c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"spacer",style:{width:!0===s?b:"48px"}}),c.a.createElement("div",{className:"sidenav",style:{left:!0===s?"0":"-168px"}},c.a.createElement("ul",null,c.a.createElement("div",{className:"close-icon"},c.a.createElement(m.a,{onClick:function(){return l(!s)},style:{color:""},className:"menu-icon",icon:s?d.g:d.a})),e.links.map((function(e,t){return c.a.createElement("li",{className:v===t?"selected-link":"",onClick:function(){return f(t)}},c.a.createElement(o.b,{to:e.route},c.a.createElement("p",null,e.text),e.icon))})))),e.displace?null:h)}a(122),a(123);function E(e){var t=e.device;return c.a.createElement("div",{className:"device-card"},c.a.createElement("p",{className:"device-card-subheader"},"device id: ",t.dev_id),c.a.createElement("div",{className:"device-card-header"},c.a.createElement("p",{className:"device-card-header-text"},t.dev_name),c.a.createElement(m.a,{className:"device-card-header-icon",icon:d.d})),c.a.createElement("p",{className:"device-card-text"},t.dev_desc),c.a.createElement("p",{className:"device-card-support-text"},"location: ",t.dev_location))}var v=function(e){var t=new Date(1e3*e),a=t.getFullYear();return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()]+"-"+t.getDate()+"-"+a+" "+t.getHours()+":"+("0"+t.getMinutes()).substr(-2)},f="https://iot-backend-178.herokuapp.com/";function b(e){var t=Object(n.useState)([]),a=Object(r.a)(t,2),s=a[0],l=a[1];return Object(n.useEffect)((function(){console.log("fetching device list"),fetch("https://iot-backend-178.herokuapp.com/devices/").then((function(e){return e.json()})).then((function(e){l(e),console.log(e)}))}),[]),c.a.createElement("div",{className:"device-container"},c.a.createElement("div",{className:"header"},c.a.createElement("h1",{className:"header-lettering"},"Devices")),c.a.createElement("div",{className:"device-grid"},s.map((function(e,t){return c.a.createElement(o.b,{key:t+e,style:{color:"black",textDecoration:"none"},to:{pathname:"devices/".concat(e.dev_id),state:{device:e}}},c.a.createElement(E,{device:e}))}))))}a(124);function p(e){var t=e.sensor;return c.a.createElement("div",{className:"sensor-card"},c.a.createElement(m.a,{className:"sensor-icon",icon:d.e}),c.a.createElement("p",{className:"sensor-id"},"sensor id: ",t.sensor_id),c.a.createElement("p",{className:"sensor-name"},t.sensor_name),c.a.createElement("div",{className:"sensor-data"},c.a.createElement("p",{className:"sensor-value"},t.sensor_pv||"00.00"),c.a.createElement("p",{className:"sensor-units"}," \xa0",t.sensor_units)),c.a.createElement("p",{className:"sensor-description"},t.sensor_desc))}a(125);function h(e){var t=Object(i.g)().slug,a=Object(i.f)(),s=Object(n.useState)([]),l=Object(r.a)(s,2),m=l[0],d=l[1];return Object(n.useEffect)((function(){fetch(f+"sensors/deviceId/"+t).then((function(e){return e.json()})).then((function(e){d(e)}))}),[]),c.a.createElement("div",{className:"details"},c.a.createElement("div",{className:"header"},c.a.createElement("h1",{className:"header-lettering"},"Device: ",a.state.device.dev_name)),c.a.createElement("div",{className:"properties-list"},c.a.createElement("h1",{className:"title-lettering"},"Details"),c.a.createElement("table",null,c.a.createElement("tbody",null,c.a.createElement("tr",null,c.a.createElement("td",{className:"table-identifier"},"ID:"),c.a.createElement("td",{className:"table-val"},a.state.device.dev_id)),c.a.createElement("tr",null,c.a.createElement("td",{className:"table-identifier"},"Arch:"),c.a.createElement("td",{className:"table-val"},a.state.device.dev_arch)),c.a.createElement("tr",null,c.a.createElement("td",{className:"table-identifier"},"OS:"),c.a.createElement("td",{className:"table-val"},a.state.device.dev_os)),c.a.createElement("tr",null,c.a.createElement("td",{className:"table-identifier"},"Location:"),c.a.createElement("td",{className:"table-val"},a.state.device.dev_location)),c.a.createElement("tr",null,c.a.createElement("td",{className:"table-identifier"},"Description:"),c.a.createElement("td",{className:"table-val"},a.state.device.dev_desc))))),c.a.createElement("div",{className:"sensors"},c.a.createElement("h1",{className:"title-lettering"},"Attached Sensors "),c.a.createElement("div",{className:"sensors-list"},m.length>0?m.map((function(e,t){return c.a.createElement("div",{className:"sensor",key:e+t},c.a.createElement(o.b,{key:t+e,style:{color:"black",textDecoration:"none"},to:{pathname:"/sensors/".concat(e.sensor_id),state:{sensor:e}}},c.a.createElement(p,{sensor:e})))})):c.a.createElement("p",{className:"sensor-null"},"No sensors found."))))}a(126);function N(e){var t=Object(n.useState)([]),a=Object(r.a)(t,2),s=a[0],l=a[1];return Object(n.useEffect)((function(){console.log("fetching sensors list"),fetch("https://iot-backend-178.herokuapp.com/sensors/").then((function(e){return e.json()})).then((function(e){l(e)}))}),[]),c.a.createElement("div",{className:!0},c.a.createElement("div",{className:"header"},c.a.createElement("h1",{className:"header-lettering"},"Sensors")),c.a.createElement("div",{className:"sensors-content"},s.map((function(e,t){return c.a.createElement("div",{className:"sensor-item"},c.a.createElement(o.b,{key:t+e,style:{color:"black",textDecoration:"none"},to:{pathname:"sensors/".concat(e.sensor_id),state:{sensor:e}}},c.a.createElement(p,{sensor:e})))}))))}var g=a(79);a(218),a(219);function j(e){return c.a.createElement("div",{className:"loading-page"},c.a.createElement("div",{className:"loading"},c.a.createElement("p",{className:"loading-message-header"},"Fetching Data.."),c.a.createElement("p",{className:"loading-message-subheader"},"Please Wait..."),c.a.createElement(m.a,{className:"loading-icon",icon:d.f,spin:!0,size:"lg"})))}function O(e){var t=Object(n.useState)([]),a=Object(r.a)(t,2),s=a[0],l=a[1],i=Object(n.useState)([]),o=Object(r.a)(i,2),m=o[0],d=o[1],u={labels:s,datasets:[{label:"Readings",fill:!1,lineTension:.25,backgroundColor:"rgba(75,192,192,1)",borderColor:"rgba(0,0,0,1)",borderWidth:2,data:m}]};return Object(n.useEffect)((function(){var t=f+"readings/sensor/"+e.sensor_id+"?period="+e.period;console.log("baeURI: "+t),fetch(t).then((function(e){return e.json()})).then((function(e){l(e.map((function(e){return function(e){var t=new Date(1e3*e),a=t.getFullYear();return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()]+"-"+t.getDate()+"-"+a}(e.ts)}))),d(e.map((function(e){return e.val})))}))}),[]),c.a.createElement("div",{className:"visualization-content"},s.length>0?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"visualization-line-chart"},c.a.createElement(g.a,{data:u,options:{responsive:!0,maintainAspectRatio:!1,title:{display:!0,text:e.period+" readings ("+e.units+")",fontSize:24,fontFamily:"Ubuntu",fontStyle:200,fontColor:"rgb(145, 145, 145)"},legend:{display:!1}}})),c.a.createElement("div",{className:"visualization-table"},c.a.createElement("table",null,c.a.createElement("tbody",null,c.a.createElement("tr",{className:"table-header",style:{position:"sticky",top:"0",zIndex:"1"}},c.a.createElement("td",{className:"table-identifier"},"Timestamp"),c.a.createElement("td",{className:"table-identifier"},"Value(",e.units,")")),s.map((function(e,t){return c.a.createElement("tr",null,c.a.createElement("td",{className:"table-val"},e),c.a.createElement("td",{className:"table-val"},m[t]))})))))):c.a.createElement(j,null))}a(220);function y(e){var t=Object(i.g)().slug,a=Object(n.useState)({}),s=Object(r.a)(a,2),l=s[0],o=s[1],m=Object(n.useState)([]),d=Object(r.a)(m,2),u=(d[0],d[1]),E=Object(n.useState)([]),v=Object(r.a)(E,2),b=(v[0],v[1]);return Object(n.useEffect)((function(){fetch(f+"sensors/"+t).then((function(e){return e.json()})).then((function(e){o(e)}))}),[]),Object(n.useEffect)((function(){fetch(f+"readings/sensor/"+t+"?period=weekly").then((function(e){return e.json()})).then((function(e){u(e.map((function(e){return e.ts}))),b(e.map((function(e){return e.val})))}))}),[]),c.a.createElement("div",{className:"sensor-details-page"},c.a.createElement("div",{className:"header"},c.a.createElement("h1",{className:"header-lettering"},"Sensor: ",l.sensor_name)),c.a.createElement("div",{className:"data"},c.a.createElement(O,{period:"weekly",sensor_id:t,units:l.sensor_units}),c.a.createElement(O,{period:"daily",sensor_id:t,units:l.sensor_units})))}a(221);function k(e){var t=Object(n.useState)([]),a=Object(r.a)(t,2),s=a[0],l=a[1];return Object(n.useEffect)((function(){fetch("https://iot-backend-178.herokuapp.com/readings?order=desc").then((function(e){return e.json()})).then((function(e){l(e)}))}),[]),c.a.createElement("div",null,c.a.createElement("div",{className:"header"},c.a.createElement("h1",{className:"header-lettering"},"Readings")),s.length>0?c.a.createElement("div",{className:"all-readings-table"},c.a.createElement("table",{style:{width:"90vw"}},c.a.createElement("tbody",null,c.a.createElement("tr",{className:"table-header"},c.a.createElement("td",{className:"table-identifier"},"Timestamp"),c.a.createElement("td",{className:"table-identifier"},"Sensor ID"),c.a.createElement("td",{className:"table-identifier"},"Value"),c.a.createElement("td",{className:"table-identifier"},"Units")),s.map((function(e,t){return c.a.createElement("tr",null,c.a.createElement("td",{className:"table-val"},v(e.ts)),c.a.createElement("td",{className:"table-val"},e.sensor_id),c.a.createElement("td",{className:"table-val"},e.val),c.a.createElement("td",{className:"table-val"},e.units))}))))):c.a.createElement(j,null))}a(222);function _(){var e=Object(n.useState)([]),t=Object(r.a)(e,2),a=t[0],s=t[1],l=Object(n.useState)(0),i=Object(r.a)(l,2),u=i[0],E=i[1],f=Object(n.useState)(0),b=Object(r.a)(f,2),p=b[0],h=b[1];return Object(n.useEffect)((function(){fetch("https://iot-backend-178.herokuapp.com/readings?order=desc&limit=30").then((function(e){return e.json()})).then((function(e){s(e)}))}),[]),Object(n.useEffect)((function(){fetch("https://iot-backend-178.herokuapp.com/sensors/count").then((function(e){return e.json()})).then((function(e){h(e.sensor_count)}))}),[]),Object(n.useEffect)((function(){fetch("https://iot-backend-178.herokuapp.com/devices/count").then((function(e){return e.json()})).then((function(e){E(e.device_count)}))}),[]),c.a.createElement("div",{className:"home-page"},c.a.createElement("div",{className:"header"},c.a.createElement("h1",{className:"header-lettering"},"Home")),c.a.createElement("div",{className:"home-summary"},c.a.createElement(o.b,{key:"devices-link",style:{color:"black",textDecoration:"none"},to:{pathname:"/devices"}},c.a.createElement("div",{className:"summary-widget"},c.a.createElement(m.a,{className:"summary-icon",icon:d.d}),c.a.createElement("div",{className:"summary-details"},c.a.createElement("p",{className:"summary-property"},"Devices"),c.a.createElement("p",{className:"summary-value"},u)))),c.a.createElement(o.b,{key:"devices-link",style:{color:"black",textDecoration:"none"},to:{pathname:"/sensors"}},c.a.createElement("div",{className:"summary-widget"},c.a.createElement(m.a,{className:"summary-icon",icon:d.e}),c.a.createElement("div",{className:"summary-details"},c.a.createElement("p",{className:"summary-property"},"Sensors"),c.a.createElement("p",{className:"summary-value"},p))))),c.a.createElement("div",null,c.a.createElement("p",{className:"title"},"Recent Measurements"),c.a.createElement("div",{className:"recent-readings-table"},c.a.createElement("table",{style:{width:"80vw"}},c.a.createElement("tbody",null,c.a.createElement("tr",{className:"table-header",style:{position:"sticky",top:"0",zIndex:"1"}},c.a.createElement("td",{className:"table-identifier"},"Timestamp"),c.a.createElement("td",{className:"table-identifier"},"Sensor ID"),c.a.createElement("td",{className:"table-identifier"},"Value"),c.a.createElement("td",{className:"table-identifier"},"Units")),a.map((function(e,t){return c.a.createElement("tr",null,c.a.createElement("td",{className:"table-val"},v(e.ts)),c.a.createElement("td",{className:"table-val"},e.sensor_id),c.a.createElement("td",{className:"table-val"},e.val),c.a.createElement("td",{className:"table-val"},e.units))})))))))}var S=function(){var e=[{text:"Home",route:"/home",icon:c.a.createElement(m.a,{icon:d.c})},{text:"Devices",route:"/devices",icon:c.a.createElement(m.a,{icon:d.d})},{text:"Sensors",route:"/sensors",icon:c.a.createElement(m.a,{icon:d.e})},{text:"Readings",route:"/readings",icon:c.a.createElement(m.a,{icon:d.b})}],t=Object(n.useState)(""),a=Object(r.a)(t,2),s=a[0],l=a[1];return Object(n.useEffect)((function(){fetch(f).then((function(e){return e.json()})).then((function(e){console.log("status: "+e.status),l(e.status)}))}),[]),c.a.createElement("div",{className:"App"},"OK"===s?c.a.createElement(c.a.Fragment,null,c.a.createElement(u,{links:e}),c.a.createElement(i.c,null,c.a.createElement(i.a,{path:"/sensors/:slug",component:y}),c.a.createElement(i.a,{path:"/sensors/",component:N}),c.a.createElement(i.a,{path:"/readings",component:k}),c.a.createElement(i.a,{path:"/devices/:slug",component:h}),c.a.createElement(i.a,{path:"/devices",component:b}),c.a.createElement(i.a,{path:"/",component:_}))):c.a.createElement(j,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(o.a,null,c.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[108,1,2]]]);
//# sourceMappingURL=main.8ea8f059.chunk.js.map